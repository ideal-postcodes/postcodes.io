"use strict";(self.webpackChunkpostcodes_io=self.webpackChunkpostcodes_io||[]).push([[9581],{28453:(e,s,o)=>{o.d(s,{R:()=>c,x:()=>a});var n=o(96540);const t={},i=n.createContext(t);function c(e){const s=n.useContext(i);return n.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function a(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:c(e.components),n.createElement(i.Provider,{value:s},e.children)}},35871:(e,s,o)=>{o.r(s),o.d(s,{assets:()=>r,contentTitle:()=>a,default:()=>h,frontMatter:()=>c,metadata:()=>n,toc:()=>d});const n=JSON.parse('{"id":"self-host","title":"Self Host (Docker)","description":"Postcodes.io can be installed using two Docker containers: the postcodes.io application container and the postcodes.io database container.","source":"@site/docs/self-host.mdx","sourceDirName":".","slug":"/self-host","permalink":"/docs/self-host","draft":false,"unlisted":false,"editUrl":"https://github.com/ideal-postcodes/postcodes.io/docs/self-host.mdx","tags":[],"version":"current","frontMatter":{"sidebar_label":"Self Host","title":"Self Host (Docker)"},"sidebar":"docsSidebar","previous":{"title":"Libraries","permalink":"/docs/libraries"},"next":{"title":"Licences","permalink":"/docs/licences"}}');var t=o(74848),i=o(28453);const c={sidebar_label:"Self Host",title:"Self Host (Docker)"},a=void 0,r={},d=[{value:"Requirements",id:"requirements",level:3},{value:"Quickstart",id:"quickstart",level:3},{value:"Application Container",id:"application-container",level:3},{value:"Database Container",id:"database-container",level:3}];function l(e){const s={a:"a",admonition:"admonition",code:"code",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.p,{children:"Postcodes.io can be installed using two Docker containers: the postcodes.io application container and the postcodes.io database container."}),"\n",(0,t.jsx)(s.h3,{id:"requirements",children:"Requirements"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:["Local copy of ",(0,t.jsx)(s.a,{href:"https://github.com/ideal-postcodes/postcodes.io",children:"postcodes.io repository"})]}),"\n",(0,t.jsx)(s.li,{children:(0,t.jsx)(s.a,{href:"https://www.docker.com/",children:"Docker"})}),"\n"]}),"\n",(0,t.jsx)(s.h3,{id:"quickstart",children:"Quickstart"}),"\n",(0,t.jsxs)(s.p,{children:["If you want to launch the postcodes.io HTTP interface and underlying database quickly, you may do so with ",(0,t.jsx)(s.code,{children:"docker-compose"}),"."]}),"\n",(0,t.jsx)(s.p,{children:"Clone the project repository and run docker-compose:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"$ docker-compose up -d\n"})}),"\n",(0,t.jsxs)(s.p,{children:["Running the above command in your terminal will create and network the containers. The HTTP service will be available on port ",(0,t.jsx)(s.code,{children:"8000"}),"."]}),"\n",(0,t.jsx)(s.h3,{id:"application-container",children:"Application Container"}),"\n",(0,t.jsxs)(s.p,{children:["The Postcodes.io application, which provides the HTTP interface, is packaged as a Docker container identified on the Docker Hub as ",(0,t.jsx)(s.code,{children:"idealpostcodes/postcodes.io"}),"."]}),"\n",(0,t.jsx)(s.p,{children:"Example usage:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"$ docker run -d -p 8000 idealpostcodes/postcodes.io\n"})}),"\n",(0,t.jsx)(s.p,{children:"Configuration available via Environment Variables:"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:(0,t.jsx)(s.code,{children:"POSTGRES_USER"})}),"\n",(0,t.jsx)(s.li,{children:(0,t.jsx)(s.code,{children:"POSTGRES_PASSWORD"})}),"\n",(0,t.jsx)(s.li,{children:(0,t.jsx)(s.code,{children:"POSTGRES_DATABASE"})}),"\n",(0,t.jsx)(s.li,{children:(0,t.jsx)(s.code,{children:"POSTGRES_HOST"})}),"\n",(0,t.jsx)(s.li,{children:(0,t.jsx)(s.code,{children:"POSTGRES_PORT"})}),"\n",(0,t.jsx)(s.li,{children:(0,t.jsx)(s.code,{children:"PORT (HTTP Port to run on)"})}),"\n"]}),"\n",(0,t.jsx)(s.h3,{id:"database-container",children:"Database Container"}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.code,{children:"idealpostcodes/postcodes.io.db"})," points to a ",(0,t.jsx)(s.a,{href:"https://hub.docker.com/r/mdillon/postgis/",children:"PostgreSQL & PostGIS"})," base image and preloads the latest ",(0,t.jsx)(s.code,{children:"pg_dump"})," in the initialization process. The database Docker image is updated with new releases of the ONSPD dataset."]}),"\n",(0,t.jsxs)(s.p,{children:["The database Docker image is updated with new releases of the ONSPD dataset. See the ",(0,t.jsx)(s.a,{href:"https://github.com/ideal-postcodes/postcodes.io/blob/master/CHANGELOG.md",children:"Changelog"})," for when a new dataset has been ingested."]}),"\n",(0,t.jsx)(s.admonition,{type:"info",children:(0,t.jsxs)(s.p,{children:["Upon starting a container for the first time, PostGIS will be enabled and the ",(0,t.jsx)(s.code,{children:"pg_dump"})," will take 15-60s to restore depending on your system resources."]})}),"\n",(0,t.jsx)(s.p,{children:"Example Usage:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"$ docker run -p 5432 -e POSTGRES_USER=postcodesio -e POSTGRES_DB=postcodesiodb -e POSTGRES_PASSWORD=password idealpostcodes/postcodes.io.db\n"})}),"\n",(0,t.jsxs)(s.p,{children:["As this contains the official PostgreSQL base image, the available configuration environment variables are documented ",(0,t.jsx)(s.a,{href:"https://hub.docker.com/_/postgres/",children:"here"})]})]})}function h(e={}){const{wrapper:s}={...(0,i.R)(),...e.components};return s?(0,t.jsx)(s,{...e,children:(0,t.jsx)(l,{...e})}):l(e)}}}]);